---
import BaseLayout from '../../layouts/BaseLayout.astro';

// 隐私政策SEO数据
const seoData = {
  title: "Privacy Policy | EduGameHQ - Protecting Your Privacy",
  description: "Learn how EduGameHQ protects your privacy and keeps children safe online. COPPA and GDPR compliant educational gaming platform.",
  keywords: ["privacy policy", "child safety", "COPPA compliance", "data protection", "educational games privacy"]
};

// 隐私政策章节数据
const policySections = [
  {
    id: "introduction",
    title: "Introduction",
    icon: "fa-info-circle",
    content: "EduGameHQ.com is committed to protecting the privacy of our users, especially children. This Privacy Policy explains how we collect, use, and protect information when you visit our educational gaming platform."
  },
  {
    id: "information-collection",
    title: "Information We Collect",
    icon: "fa-database",
    subsections: [
      {
        title: "Information We Do NOT Collect",
        type: "dont-collect",
        items: [
          "Personal information from children under 13",
          "Names, addresses, or contact information", 
          "Photos or videos",
          "Location data",
          "Social media profiles"
        ]
      },
      {
        title: "Information We May Collect",
        type: "may-collect",
        items: [
          { label: "Game Progress", detail: "Stored locally on your device only" },
          { label: "Anonymous Usage Data", detail: "Which games are played (no personal identification)" },
          { label: "Technical Information", detail: "Browser type, device type for optimization" }
        ]
      }
    ]
  },
  {
    id: "information-use",
    title: "How We Use Information",
    icon: "fa-cogs",
    items: [
      "Improve our educational games and website",
      "Ensure games work properly on different devices",
      "Provide a safe learning environment",
      "Display appropriate, non-personalized advertisements"
    ]
  },
  {
    id: "cookies-storage",
    title: "Cookies and Local Storage",
    icon: "fa-cookie-bite",
    content: "We use minimal cookies and local storage to enhance your experience:",
    items: [
      "Remember your game progress (stored on your device only)",
      "Ensure the website functions properly",
      "Display non-personalized advertisements"
    ],
    note: "You can disable cookies in your browser settings, but some features may not work properly."
  },
  {
    id: "third-party",
    title: "Third-Party Services",
    icon: "fa-handshake",
    subsections: [
      {
        title: "Educational Game Providers",
        content: "Our games are embedded from trusted educational platforms. Each game provider has their own privacy policy."
      },
      {
        title: "Google AdSense",
        content: "We use Google AdSense to display advertisements. For children's content:",
        items: [
          "Only non-personalized ads are shown",
          "Ads are family-friendly and appropriate for children",
          "No personal data is used for ad targeting"
        ]
      }
    ]
  },
  {
    id: "coppa-compliance",
    title: "Children's Privacy (COPPA Compliance)",
    icon: "fa-child",
    content: "We are committed to complying with the Children's Online Privacy Protection Act (COPPA):",
    items: [
      "We do not knowingly collect personal information from children under 13",
      "We do not require registration or account creation",
      "All content is designed to be safe for children",
      "Parents can contact us with any concerns"
    ]
  },
  {
    id: "data-security",
    title: "Data Security",
    icon: "fa-shield-alt",
    content: "We implement appropriate security measures to protect any information we collect:",
    items: [
      "HTTPS encryption for all website traffic",
      "Minimal data collection practices",
      "Regular security updates",
      "Secure hosting infrastructure"
    ]
  },
  {
    id: "international-users",
    title: "International Users",
    icon: "fa-globe",
    content: "For users in the European Union, we comply with GDPR requirements:",
    items: [
      "Minimal data processing",
      "Transparent privacy practices",
      "Right to request data deletion",
      "No profiling of children"
    ]
  },
  {
    id: "policy-changes",
    title: "Changes to This Policy",
    icon: "fa-edit",
    content: "We may update this Privacy Policy from time to time. We will notify users of any significant changes by posting the new policy on this page with an updated 'Last updated' date."
  },
  {
    id: "contact-us",
    title: "Contact Us",
    icon: "fa-envelope",
    content: "If you have any questions about this Privacy Policy or our privacy practices, please contact us:",
    items: [
      "Email: privacy@edugamehq.com",
      "Website: Contact Form"
    ],
    note: "For Parents: If you believe your child has provided personal information to us, please contact us immediately so we can remove it."
  }
];
---

<BaseLayout title={seoData.title} description={seoData.description} lang="ko">
  <main class="privacy-policy-page">
    <div class="content-wrapper">
      
      <!-- 隐私政策头部 -->
      <section class="policy-header">
        <div class="header-content">
          <div class="header-icon">
            <div class="section-icon privacy-icon">
              <i class="fas fa-shield-alt"></i>
            </div>
          </div>
          <div class="header-text">
            <h1 class="page-title">Privacy Policy</h1>
            <p class="page-description">
              Your privacy and safety are our top priorities, especially for children
            </p>
            <p class="last-updated">Last updated: January 2025</p>
          </div>
        </div>
      </section>

      <div class="policy-content">
        <!-- 侧边栏目录 -->
        <aside class="policy-sidebar">
          <div class="sidebar-header">
            <h3>Quick Navigation</h3>
          </div>
          <nav class="policy-nav">
            <ul>
              {policySections.map((section) => (
                <li>
                  <a href={`#${section.id}`} class="nav-link">
                    <i class={`fas ${section.icon}`}></i>
                    <span>{section.title}</span>
                  </a>
                </li>
              ))}
            </ul>
          </nav>
        </aside>

        <!-- 主要内容区域 -->
        <div class="policy-main">
          {policySections.map((section) => (
            <section class="policy-section" id={section.id}>
              <div class="section-header">
                <div class="section-icon-small">
                  <i class={`fas ${section.icon}`}></i>
                </div>
                <h2 class="section-title">{section.title}</h2>
              </div>

              <div class="section-content">
                {section.content && (
                  <p class="section-description">{section.content}</p>
                )}

                {section.items && (
                  <ul class="policy-list">
                    {section.items.map((item: any) => (
                      <li>
                        {typeof item === 'string' ? (
                          item
                        ) : (
                          <div>
                            <strong>{(item as any).label}:</strong> {(item as any).detail}
                          </div>
                        )}
                      </li>
                    ))}
                  </ul>
                )}

                {section.subsections && section.subsections.map((subsection: any) => (
                  <div class="subsection">
                    <h3 class="subsection-title">{subsection.title}</h3>
                    {subsection.content && (
                      <p class="subsection-description">{subsection.content}</p>
                    )}
                    
                    {subsection.type === 'dont-collect' && (
                      <div class="highlight-box dont-collect">
                        <div class="highlight-icon">
                          <i class="fas fa-times-circle"></i>
                        </div>
                        <ul>
                          {subsection.items?.map((item: string) => (
                            <li class="policy-item">
                              <i class="fas fa-times-circle"></i>
                              {item}
                            </li>
                          ))}
                        </ul>
                      </div>
                    )}

                    {subsection.type === 'may-collect' && (
                      <div class="highlight-box may-collect">
                        <div class="highlight-icon">
                          <i class="fas fa-question-circle"></i>
                        </div>
                        <ul>
                          {subsection.items?.map((item: any) => (
                            <li class="policy-item">
                              <i class="fas fa-question-circle"></i>
                              <strong>{(item as any).label}:</strong> {(item as any).detail}
                            </li>
                          ))}
                        </ul>
                      </div>
                    )}

                    {subsection.items && !subsection.type && (
                      <ul class="policy-list">
                        {subsection.items.map((item: string) => (
                          <li class="policy-item">
                            <i class="fas fa-check-circle"></i>
                            {item}
                          </li>
                        ))}
                      </ul>
                    )}
                  </div>
                ))}

                {section.note && (
                  <div class="policy-note">
                    <i class="fas fa-lightbulb"></i>
                    <span>{section.note}</span>
                  </div>
                )}
              </div>
            </section>
          ))}

          <!-- 联系行动区域 -->
          <section class="contact-cta">
            <div class="cta-content">
              <div class="cta-icon">
                <i class="fas fa-question-circle"></i>
              </div>
              <div class="cta-text">
                <h3>Have Questions About Our Privacy Policy?</h3>
                <p>We're here to help! Contact our privacy team for any concerns.</p>
              </div>
              <div class="cta-actions">
                <a href="/help" class="btn-primary">Visit Help Center</a>
                <a href="mailto:privacy@edugamehq.com" class="btn-secondary">Email Us</a>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>
  </main>
</BaseLayout>

<script>
  // 平滑滚动到锚点
  document.addEventListener('DOMContentLoaded', function() {
    const navLinks = document.querySelectorAll('.nav-link');
    
    navLinks.forEach(link => {
      link.addEventListener('click', function(this: HTMLElement, e: Event) {
        const href = this.getAttribute('href');
        
        // 只对页面内锚点链接（以#开头）执行preventDefault，不影响外部链接
        if (href && href.startsWith('#')) {
          e.preventDefault();
          const targetId = href.substring(1);
          const targetElement = document.getElementById(targetId);
          
          if (targetElement) {
            // 移除所有活动状态
            navLinks.forEach(nl => nl.classList.remove('active'));
            // 添加当前活动状态
            this.classList.add('active');
            
            // 平滑滚动
            targetElement.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        }
        // 对于外部链接（如/、/help等），让浏览器正常处理
      });
    });

    // 滚动监听，高亮当前章节
    const sections = document.querySelectorAll('.policy-section');
    const options = {
      threshold: 0.3,
      rootMargin: '-100px 0px -50% 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const sectionId = entry.target.id;
          const correspondingNavLink = document.querySelector(`a[href="#${sectionId}"]`);
          
          // 移除所有活动状态
          navLinks.forEach(nl => nl.classList.remove('active'));
          
          // 添加当前活动状态
          if (correspondingNavLink) {
            correspondingNavLink.classList.add('active');
          }
        }
      });
    }, options);

    sections.forEach(section => {
      observer.observe(section);
    });
  });
</script>

<style>
  /* 主要内容区域 */
  .privacy-policy-page {
    width: 100%;
    background: linear-gradient(135deg, #FEFCFB 0%, #FEF3E2 50%, rgba(34, 197, 94, 0.05) 100%);
    min-height: 100vh;
  }

  .content-wrapper {
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem;
  }

  /* 隐私政策头部 - 绿色主题 */
  .policy-header {
    background: linear-gradient(135deg, #D1FAE5 0%, #A7F3D0 50%, #10B981 100%);
    border-radius: 20px;
    padding: 3rem;
    margin-bottom: 3rem;
    box-shadow: 0 4px 14px 0 rgba(16, 185, 129, 0.2);
    position: relative;
    overflow: hidden;
  }

  .policy-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.2), transparent 50%);
  }

  .header-content {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    position: relative;
    z-index: 1;
  }

  .header-icon {
    flex-shrink: 0;
  }

  .section-icon {
    width: 64px;
    height: 64px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.5rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  }

  .privacy-icon {
    background: linear-gradient(135deg, #10B981, #059669);
  }

  .header-text {
    flex: 1;
  }

  .page-title {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 2.5rem;
    font-weight: 800;
    margin: 0 0 0.5rem 0;
    color: #065F46;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    line-height: 1.2;
  }

  .page-description {
    font-size: 1.125rem;
    color: #047857;
    margin: 0 0 0.5rem 0;
    font-weight: 500;
    line-height: 1.6;
  }

  .last-updated {
    font-size: 0.875rem;
    color: #065F46;
    font-style: italic;
    margin: 0;
    opacity: 0.8;
  }

  /* 内容布局 */
  .policy-content {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: 3rem;
    align-items: start;
  }

  /* 侧边栏 */
  .policy-sidebar {
    background: white;
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
    border: 1px solid #E5E7EB;
    position: sticky;
    top: 2rem;
    max-height: calc(100vh - 4rem);
    overflow-y: auto;
  }

  .sidebar-header h3 {
    font-size: 1.125rem;
    font-weight: 600;
    color: #1F2937;
    margin: 0 0 1rem 0;
    padding-bottom: 0.75rem;
    border-bottom: 2px solid #10B981;
  }

  .policy-nav ul {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .policy-nav li {
    margin-bottom: 0.25rem;
  }

  .nav-link {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem;
    border-radius: 8px;
    text-decoration: none;
    color: #4B5563;
    font-weight: 500;
    font-size: 0.875rem;
    transition: all 0.3s ease;
  }

  .nav-link:hover {
    background: #F3F4F6;
    color: #10B981;
  }

  .nav-link.active {
    background: #D1FAE5;
    color: #065F46;
    font-weight: 600;
  }

  .nav-link i {
    width: 16px;
    text-align: center;
    opacity: 0.7;
  }

  .nav-link.active i {
    opacity: 1;
    color: #10B981;
  }

  /* 主要内容 */
  .policy-main {
    background: white;
    border-radius: 20px;
    padding: 2rem;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
    border: 1px solid #E5E7EB;
  }

  .policy-section {
    margin-bottom: 3rem;
    scroll-margin-top: 2rem;
  }

  .policy-section:last-of-type {
    margin-bottom: 2rem;
  }

  .section-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid #F3F4F6;
  }

  .section-icon-small {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    background: linear-gradient(135deg, #10B981, #059669);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1rem;
  }

  .section-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: #1F2937;
    margin: 0;
    font-family: 'Space Grotesk', sans-serif;
  }

  .section-content {
    line-height: 1.7;
  }

  .section-description {
    color: #4B5563;
    font-size: 1rem;
    margin-bottom: 1.5rem;
    line-height: 1.7;
  }

  .policy-list {
    list-style: none;
    margin: 1rem 0;
    padding: 0;
  }

  .policy-list li {
    padding: 0.75rem 0;
    border-bottom: 1px solid #F3F4F6;
    color: #4B5563;
    position: relative;
    padding-left: 1.5rem;
  }

  .policy-list li:before {
    content: '✓';
    position: absolute;
    left: 0;
    color: #10B981;
    font-weight: bold;
  }

  .policy-list li:last-child {
    border-bottom: none;
  }

  /* 子章节 */
  .subsection {
    margin: 2rem 0;
  }

  .subsection-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: #1F2937;
    margin: 0 0 1rem 0;
  }

  .subsection-description {
    color: #4B5563;
    margin-bottom: 1rem;
    line-height: 1.7;
  }

  /* 高亮框 */
  .highlight-box {
    background: #F9FAFB;
    border-radius: 12px;
    padding: 1.5rem;
    margin: 1.5rem 0;
    border-left: 4px solid #10B981;
    position: relative;
  }

  .dont-collect {
    background: #FEF2F2;
    border-left-color: #EF4444;
  }

  .may-collect {
    background: #FEF3E2;
    border-left-color: #F59E0B;
  }

  .highlight-icon {
    position: absolute;
    top: 1rem;
    right: 1rem;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 0.875rem;
  }

  .dont-collect .highlight-icon {
    background: #EF4444;
  }

  .may-collect .highlight-icon {
    background: #F59E0B;
  }

  .highlight-box ul {
    margin: 0;
    padding-left: 1.5rem;
  }

  .highlight-box li {
    color: #374151;
    margin-bottom: 0.5rem;
  }

  /* 政策提示 */
  .policy-note {
    background: #EFF6FF;
    border: 1px solid #DBEAFE;
    border-radius: 10px;
    padding: 1rem;
    margin: 1.5rem 0;
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .policy-note i {
    color: #3B82F6;
    font-size: 1.125rem;
    flex-shrink: 0;
  }

  .policy-note span {
    color: #1E40AF;
    font-weight: 500;
    font-size: 0.875rem;
  }

  /* 联系行动区域 */
  .contact-cta {
    background: linear-gradient(135deg, #D1FAE5 0%, #A7F3D0 100%);
    border-radius: 16px;
    padding: 2rem;
    margin-top: 2rem;
    border: 1px solid #10B981;
  }

  .cta-content {
    display: flex;
    align-items: center;
    gap: 2rem;
  }

  .cta-icon {
    width: 64px;
    height: 64px;
    border-radius: 16px;
    background: linear-gradient(135deg, #10B981, #059669);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.5rem;
    flex-shrink: 0;
  }

  .cta-text {
    flex: 1;
  }

  .cta-text h3 {
    font-size: 1.25rem;
    font-weight: 600;
    color: #065F46;
    margin: 0 0 0.5rem 0;
  }

  .cta-text p {
    color: #047857;
    margin: 0;
    font-weight: 500;
  }

  .cta-actions {
    display: flex;
    gap: 1rem;
    flex-shrink: 0;
  }

  .btn-primary, .btn-secondary {
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    font-size: 0.875rem;
    transition: all 0.3s ease;
  }

  .btn-primary {
    background: #10B981;
    color: white;
    border: 2px solid #10B981;
  }

  .btn-primary:hover {
    background: #059669;
    border-color: #059669;
  }

  .btn-secondary {
    background: transparent;
    color: #10B981;
    border: 2px solid #10B981;
  }

  .btn-secondary:hover {
    background: #10B981;
    color: white;
  }

  /* 响应式设计 */
  @media (max-width: 1024px) {
    .content-wrapper {
      padding: 1.5rem;
    }

    .policy-content {
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    .policy-sidebar {
      position: static;
      max-height: none;
      margin-bottom: 1rem;
    }

    .policy-header {
      padding: 2rem;
    }

    .header-content {
      flex-direction: column;
      gap: 1rem;
      text-align: center;
    }
  }

  @media (max-width: 768px) {
    .content-wrapper {
      padding: 1rem;
    }

    .policy-header {
      padding: 1.5rem;
    }

    .page-title {
      font-size: 2rem;
    }

    .policy-main {
      padding: 1.5rem;
    }

    .cta-content {
      flex-direction: column;
      text-align: center;
      gap: 1.5rem;
    }

    .cta-actions {
      justify-content: center;
    }
  }

  @media (max-width: 480px) {
    .section-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 0.75rem;
    }

    .cta-actions {
      flex-direction: column;
      width: 100%;
    }

    .btn-primary, .btn-secondary {
      text-align: center;
    }
  }
</style> 

