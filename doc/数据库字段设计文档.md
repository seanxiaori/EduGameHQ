# EduGameHQ 数据库字段设计文档 v2.0

## 📋 概述

本文档定义了 EduGameHQ 教育游戏聚合平台的数据库字段结构，基于前端显示需求和爬虫数据采集的实际情况进行设计。

---

## 🎯 设计原则

### 核心原则
1. **简洁性** - 只保留必要字段，避免冗余
2. **实用性** - 所有字段都有明确的前端用途
3. **可扩展性** - 便于后续功能扩展
4. **爬虫友好** - 便于自动化数据采集和写入

### 字段分类
- **核心字段** - 游戏基本信息（必需）
- **显示字段** - 前端展示相关（必需）
- **状态字段** - 游戏状态标识（可选）
- **开发者字段** - 来源和开发信息（必需）

---

## 📊 最终数据库字段结构

### 🔵 核心字段（必需）

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `slug` | string | 游戏唯一标识符（URL友好） | `"2048"` |
| `title` | string | 游戏名称 | `"2048"` |
| `category` | string | 游戏分类（系统标识） | `"math"` |
| `categoryName` | string | 分类显示名称 | `"Math"` |
| `url` | string | 游戏iframe地址 | `"https://www.crazygames.com/embed/2048"` |
| `description` | string | 游戏描述/介绍 | `"Play 2048 online for free..."` |

### 🟢 显示字段（必需）

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `image` | string | 游戏截图/封面图片 | `"/images/games/2048.webp"` |
| `imageFallback` | string | 备用图片格式 | `"/images/games/2048.jpg"` |
| `difficulty` | string | 游戏难易度 | `"Easy"` / `"Medium"` / `"Hard"` |
| `ageRange` | string | 适合年龄范围 | `"6-12"` / `"8-14"` / `"12-18"` |
| `minAge` | number | 最小适合年龄 | `6` |
| `maxAge` | number | 最大适合年龄 | `12` |
| `tags` | array | 游戏标签数组 | `["math", "educational", "free"]` |

### 🟡 状态字段（可选）

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `playCount` | number | 游戏人气值/播放次数 | `7352` |
| `featured` | boolean | 是否特色游戏 | `false` |
| `trending` | boolean | 是否趋势游戏 | `true` |
| `isNew` | boolean | 是否新游戏 | `false` |

### 🔴 开发者字段（必需）

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `developer` | string | 开发者名称 | `"CrazyGames Team"` |
| `source` | string | 游戏来源平台 | `"CrazyGames"` |
| `type` | string | 商业类型 | `"Free"` / `"Premium"` |

---

## ❌ 已移除字段

### 不再使用的字段
- ~~`rating`~~ - 按需求移除  
- ~~`sourceUrl`~~ - 根据爬虫策略分析，暂不需要

### 不属于数据库的字段
- ~~游戏历史时间~~ - 属于用户个人数据，存储在浏览器localStorage

---

## 🔍 字段用途分析

### category vs categoryName
- **`category`** - 系统内部标识符，用于：
  - URL路由：`/math-games`
  - CSS类名：`.category-tag.math`
  - 程序逻辑判断：`if (game.category === 'math')`
  
- **`categoryName`** - 用户界面显示名称，用于：
  - 前端显示：显示为 "Math"
  - SEO标题：`<title>Math Games</title>`
  - 用户可见文本

### URL字段策略
经过分析，决定只保留一个 `url` 字段：
- **用途**：iframe游戏地址，用于实际游戏运行
- **原因**：大多数游戏信息可以通过其他方式获取，不一定需要原始页面URL

---

## 📝 完整示例

```json
{
  "slug": "2048",
  "title": "2048",
  "category": "math",
  "categoryName": "Math",
  "url": "https://www.crazygames.com/embed/2048",
  "image": "/images/games/2048.webp",
  "imageFallback": "/images/games/2048.jpg",
  "description": "Play 2048 online for free. Educational math game perfect for learning.",
  "difficulty": "Easy",
  "ageRange": "8-16",
  "minAge": 8,
  "maxAge": 16,
  "playCount": 7352,
  "tags": ["math", "educational", "free", "online"],
  "featured": false,
  "trending": true,
  "isNew": false,
  "developer": "CrazyGames Team",
  "source": "CrazyGames",
  "type": "Free"
}
```

---

## 🤖 爬虫数据采集策略

### 数据来源优先级
1. **第三方游戏平台** - CrazyGames, Miniplay等
2. **GitHub开源游戏** - 教育类开源项目
3. **手动精选游戏** - 高质量教育游戏

### 字段获取策略

#### 自动获取字段
- `title` - 从页面标题或游戏名称获取
- `description` - 从游戏介绍页面获取
- `url` - iframe嵌入地址
- `developer` - 从开发者信息获取
- `source` - 根据来源网站自动设置

#### 手动设置字段
- `slug` - 根据title自动生成URL友好格式
- `category` / `categoryName` - 根据游戏内容手动分类
- `difficulty` - 根据游戏复杂度手动评估
- `ageRange` / `minAge` / `maxAge` - 根据游戏内容和复杂度评估适合年龄
- `tags` - 根据游戏特点手动添加
- `image` - 截图或从游戏页面获取

#### 状态字段处理
- `playCount` - 如果平台提供则获取，否则设为0
- `featured` / `trending` / `isNew` - 根据编辑策略手动设置

---

## 🎯 前端使用映射

### 游戏卡片显示
```javascript
// 游戏卡片需要的字段
const gameCard = {
  title: game.title,
  image: game.image,
  category: game.categoryName,  // 显示用
  difficulty: game.difficulty,
  ageRange: game.ageRange,     // 年龄范围显示
  playCount: game.playCount,
  url: `/games/${game.slug}`    // 详情页链接
};
```

### 游戏详情页显示
```javascript
// 游戏详情页需要的字段
const gameDetail = {
  title: game.title,
  description: game.description,
  category: game.category,      // 系统用
  categoryName: game.categoryName, // 显示用
  difficulty: game.difficulty,
  ageRange: game.ageRange,     // 年龄范围
  minAge: game.minAge,         // 最小年龄
  maxAge: game.maxAge,         // 最大年龄
  url: game.url,               // iframe地址
  developer: game.developer,
  source: game.source,
  type: game.type
};
```

### 分类页面筛选
```javascript
// 按分类筛选游戏
const mathGames = games.filter(game => game.category === 'math');

// 按年龄范围筛选游戏
const gamesForAge10 = games.filter(game => 
  game.minAge <= 10 && game.maxAge >= 10
);

// 按年龄段筛选游戏
const elementaryGames = games.filter(game => 
  game.minAge >= 6 && game.maxAge <= 12
);
```

---

## 📋 数据验证规则

### 必需字段验证
```javascript
const requiredFields = [
  'slug', 'title', 'category', 'categoryName', 
  'url', 'description', 'image', 'difficulty',
  'ageRange', 'minAge', 'maxAge',
  'developer', 'source', 'type'
];
```

### 字段格式验证
- `slug` - 只能包含小写字母、数字和连字符
- `category` - 必须是预定义的分类之一
- `difficulty` - 必须是 "Easy", "Medium", "Hard" 之一
- `ageRange` - 格式为 "minAge-maxAge"，如 "6-12", "8-14", "12-18"
- `minAge` - 必须是6-18之间的整数
- `maxAge` - 必须是6-18之间的整数，且 >= minAge
- `url` - 必须是有效的URL格式
- `playCount` - 必须是非负整数

### 分类枚举值
```javascript
const validCategories = [
  'math', 'science', 'coding', 'language', 
  'puzzle', 'sports', 'art', 'geography'
];

const categoryNames = {
  'math': 'Math',
  'science': 'Science', 
  'coding': 'Programming',
  'language': 'Language Arts',
  'puzzle': 'Puzzle',
  'sports': 'Sports',
  'art': 'Art & Creativity',
  'geography': 'Geography & History'
};
```

---

## 🔧 数据库操作建议

### 索引建议
```sql
-- 主要查询索引
CREATE INDEX idx_category ON games(category);
CREATE INDEX idx_difficulty ON games(difficulty);
CREATE INDEX idx_featured ON games(featured);
CREATE INDEX idx_trending ON games(trending);

-- 复合索引
CREATE INDEX idx_category_difficulty ON games(category, difficulty);
```

### 查询示例
```sql
-- 获取数学类简单游戏
SELECT * FROM games 
WHERE category = 'math' AND difficulty = 'Easy'
ORDER BY playCount DESC;

-- 获取特色游戏
SELECT * FROM games 
WHERE featured = true
ORDER BY playCount DESC;
```

---

## 📈 未来扩展考虑

### 可能新增字段
- `lastUpdated` - 游戏最后更新时间
- `gameSize` - 游戏文件大小
- `language` - 游戏语言
- `multiplayer` - 是否支持多人游戏
- `offline` - 是否支持离线游戏

### 数据结构优化
- 考虑将 `tags` 独立为关联表
- 考虑将开发者信息独立为开发者表
- 考虑添加游戏评论和评分系统

---

## 🎯 年龄字段设计说明

### 年龄字段组合
我们使用三个字段来完整描述游戏的年龄适用性：

1. **`ageRange`** (string) - 用户友好的显示格式
   - 格式：`"minAge-maxAge"`
   - 示例：`"6-12"`, `"8-14"`, `"12-18"`
   - 用途：前端显示、SEO优化

2. **`minAge`** (number) - 最小适合年龄
   - 范围：6-18
   - 用途：数据库查询、筛选逻辑

3. **`maxAge`** (number) - 最大适合年龄
   - 范围：6-18
   - 用途：数据库查询、筛选逻辑

### 年龄分段标准

#### 小学阶段 (Elementary)
- **6-8岁** - 学前到小学低年级
  - 简单操作、基础概念
  - 图形化界面、直观操作

- **8-12岁** - 小学中高年级
  - 基础学科知识
  - 逻辑思维训练

#### 中学阶段 (Middle School)
- **10-14岁** - 小学高年级到初中
  - 复杂概念理解
  - 抽象思维发展

- **12-16岁** - 初中到高中
  - 学科深度学习
  - 问题解决能力

#### 高中阶段 (High School)
- **14-18岁** - 高中阶段
  - 高级概念掌握
  - 创新思维培养

### 年龄评估标准

#### 认知复杂度
- **6-8岁**：简单识别、基础操作
- **8-12岁**：逻辑推理、规则理解
- **12-16岁**：抽象思维、策略规划
- **16-18岁**：高级分析、创新应用

#### 操作难度
- **简单**：点击、拖拽等基础操作
- **中等**：多步骤操作、组合动作
- **复杂**：精确控制、时间压力

#### 学科要求
- **基础**：数字识别、颜色形状
- **进阶**：四则运算、基础科学
- **高级**：代数几何、高级科学概念

### 前端使用场景

#### 游戏卡片显示
```html
<div class="game-card">
  <h3>{{game.title}}</h3>
  <span class="age-badge">Ages {{game.ageRange}}</span>
  <span class="difficulty">{{game.difficulty}}</span>
</div>
```

#### 筛选功能
```javascript
// 年龄筛选器
function filterByAge(games, targetAge) {
  return games.filter(game => 
    game.minAge <= targetAge && game.maxAge >= targetAge
  );
}

// 年龄段筛选
function filterByAgeGroup(games, ageGroup) {
  const ageRanges = {
    'elementary': [6, 12],
    'middle': [10, 16], 
    'high': [14, 18]
  };
  
  const [minAge, maxAge] = ageRanges[ageGroup];
  return games.filter(game => 
    game.minAge >= minAge && game.maxAge <= maxAge
  );
}
```

#### SEO优化
```html
<!-- 页面标题 -->
<title>Math Games for Ages 8-12 | EduGameHQ</title>

<!-- 结构化数据 -->
<script type="application/ld+json">
{
  "@type": "Game",
  "name": "2048",
  "audience": {
    "@type": "PeopleAudience",
    "suggestedMinAge": 8,
    "suggestedMaxAge": 16
  }
}
</script>
```

### 数据库索引建议
```sql
-- 年龄范围查询索引
CREATE INDEX idx_age_range ON games(minAge, maxAge);

-- 复合索引：分类 + 年龄
CREATE INDEX idx_category_age ON games(category, minAge, maxAge);

-- 复合索引：难度 + 年龄
CREATE INDEX idx_difficulty_age ON games(difficulty, minAge, maxAge);
```

### 年龄字段维护

#### 数据一致性
- `ageRange` 必须与 `minAge-maxAge` 保持一致
- 可以通过数据库触发器或应用层验证确保一致性

#### 更新策略
- 定期评估游戏年龄适用性
- 根据用户反馈调整年龄范围
- 考虑不同地区的教育标准差异

通过这个年龄字段设计，我们可以：
1. **精准推荐** - 根据用户年龄推荐合适游戏
2. **家长控制** - 帮助家长选择适合孩子的游戏
3. **SEO优化** - 提升年龄相关关键词排名
4. **用户体验** - 提供更好的游戏筛选和发现功能

---

## 📝 维护说明

### 数据更新频率
- **游戏基本信息** - 很少变更
- **状态字段** - 定期更新（playCount, trending等）
- **图片资源** - 按需更新

### 数据质量保证
1. 定期检查图片链接有效性
2. 验证iframe地址可访问性
3. 更新过时的游戏信息
4. 清理无效或重复数据

---

## 🎯 总结

这个数据库设计：
- ✅ 满足所有前端显示需求
- ✅ 便于爬虫自动化数据采集
- ✅ 结构简洁，避免冗余字段
- ✅ 支持未来功能扩展
- ✅ 符合教育游戏平台的特点

通过这个设计，可以高效地管理游戏数据，支持平台的各种功能需求。 