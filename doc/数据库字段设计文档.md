# EduGameHQ 数据库字段设计文档 v2.0

## 📋 概述

本文档定义了 EduGameHQ 教育游戏聚合平台的数据库字段结构，基于前端显示需求和爬虫数据采集的实际情况进行设计。

---

## 🎯 设计原则

### 核心原则
1. **简洁性** - 只保留必要字段，避免冗余
2. **实用性** - 所有字段都有明确的前端用途
3. **可扩展性** - 便于后续功能扩展
4. **爬虫友好** - 便于自动化数据采集和写入

### 字段分类
- **核心字段** - 游戏基本信息（必需）
- **显示字段** - 前端展示相关（必需）
- **状态字段** - 游戏状态标识（可选）
- **开发者字段** - 来源和开发信息（必需）

---

## 📊 最终数据库字段结构

### 🔵 核心字段（必需）

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `slug` | string | 游戏唯一标识符（URL友好） | `"2048"` |
| `title` | string | 游戏名称 | `"2048"` |
| `category` | string | 游戏分类（系统标识） | `"math"` |
| `categoryName` | string | 分类显示名称 | `"Math"` |
| `url` | string | 游戏iframe地址 | `"https://www.crazygames.com/embed/2048"` |
| `description` | string | 游戏描述/介绍 | `"Play 2048 online for free..."` |

### 🟢 显示字段（必需）

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `image` | string | 游戏截图/封面图片 | `"/images/games/2048.webp"` |
| `imageFallback` | string | 备用图片格式 | `"/images/games/2048.jpg"` |
| `difficulty` | string | 游戏难易度 | `"Easy"` / `"Medium"` / `"Hard"` |
| `tags` | array | 游戏标签数组 | `["math", "educational", "free"]` |

### 🟡 状态字段（可选）

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `playCount` | number | 游戏人气值/播放次数 | `7352` |
| `featured` | boolean | 是否特色游戏 | `false` |
| `trending` | boolean | 是否趋势游戏 | `true` |
| `isNew` | boolean | 是否新游戏 | `false` |

### 🔴 开发者字段（必需）

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `developer` | string | 开发者名称 | `"CrazyGames Team"` |
| `source` | string | 游戏来源平台 | `"CrazyGames"` |
| `type` | string | 商业类型 | `"Free"` / `"Premium"` |

---

## ❌ 已移除字段

### 不再使用的字段
- ~~`ageRange`~~ - 按需求移除
- ~~`rating`~~ - 按需求移除  
- ~~`sourceUrl`~~ - 根据爬虫策略分析，暂不需要

### 不属于数据库的字段
- ~~游戏历史时间~~ - 属于用户个人数据，存储在浏览器localStorage

---

## 🔍 字段用途分析

### category vs categoryName
- **`category`** - 系统内部标识符，用于：
  - URL路由：`/math-games`
  - CSS类名：`.category-tag.math`
  - 程序逻辑判断：`if (game.category === 'math')`
  
- **`categoryName`** - 用户界面显示名称，用于：
  - 前端显示：显示为 "Math"
  - SEO标题：`<title>Math Games</title>`
  - 用户可见文本

### URL字段策略
经过分析，决定只保留一个 `url` 字段：
- **用途**：iframe游戏地址，用于实际游戏运行
- **原因**：大多数游戏信息可以通过其他方式获取，不一定需要原始页面URL

---

## 📝 完整示例

```json
{
  "slug": "2048",
  "title": "2048",
  "category": "math",
  "categoryName": "Math",
  "url": "https://www.crazygames.com/embed/2048",
  "image": "/images/games/2048.webp",
  "imageFallback": "/images/games/2048.jpg",
  "description": "Play 2048 online for free. Educational math game perfect for learning.",
  "difficulty": "Easy",
  "playCount": 7352,
  "tags": ["math", "educational", "free", "online"],
  "featured": false,
  "trending": true,
  "isNew": false,
  "developer": "CrazyGames Team",
  "source": "CrazyGames",
  "type": "Free"
}
```

---

## 🤖 爬虫数据采集策略

### 数据来源优先级
1. **第三方游戏平台** - CrazyGames, Miniplay等
2. **GitHub开源游戏** - 教育类开源项目
3. **手动精选游戏** - 高质量教育游戏

### 字段获取策略

#### 自动获取字段
- `title` - 从页面标题或游戏名称获取
- `description` - 从游戏介绍页面获取
- `url` - iframe嵌入地址
- `developer` - 从开发者信息获取
- `source` - 根据来源网站自动设置

#### 手动设置字段
- `slug` - 根据title自动生成URL友好格式
- `category` / `categoryName` - 根据游戏内容手动分类
- `difficulty` - 根据游戏复杂度手动评估
- `tags` - 根据游戏特点手动添加
- `image` - 截图或从游戏页面获取

#### 状态字段处理
- `playCount` - 如果平台提供则获取，否则设为0
- `featured` / `trending` / `isNew` - 根据编辑策略手动设置

---

## 🎯 前端使用映射

### 游戏卡片显示
```javascript
// 游戏卡片需要的字段
const gameCard = {
  title: game.title,
  image: game.image,
  category: game.categoryName,  // 显示用
  difficulty: game.difficulty,
  playCount: game.playCount,
  url: `/games/${game.slug}`    // 详情页链接
};
```

### 游戏详情页显示
```javascript
// 游戏详情页需要的字段
const gameDetail = {
  title: game.title,
  description: game.description,
  category: game.category,      // 系统用
  categoryName: game.categoryName, // 显示用
  url: game.url,               // iframe地址
  developer: game.developer,
  source: game.source,
  type: game.type
};
```

### 分类页面筛选
```javascript
// 按分类筛选游戏
const mathGames = games.filter(game => game.category === 'math');
```

---

## 📋 数据验证规则

### 必需字段验证
```javascript
const requiredFields = [
  'slug', 'title', 'category', 'categoryName', 
  'url', 'description', 'image', 'difficulty',
  'developer', 'source', 'type'
];
```

### 字段格式验证
- `slug` - 只能包含小写字母、数字和连字符
- `category` - 必须是预定义的分类之一
- `difficulty` - 必须是 "Easy", "Medium", "Hard" 之一
- `url` - 必须是有效的URL格式
- `playCount` - 必须是非负整数

### 分类枚举值
```javascript
const validCategories = [
  'math', 'science', 'coding', 'language', 
  'puzzle', 'sports', 'art', 'geography'
];

const categoryNames = {
  'math': 'Math',
  'science': 'Science', 
  'coding': 'Programming',
  'language': 'Language Arts',
  'puzzle': 'Puzzle',
  'sports': 'Sports',
  'art': 'Art & Creativity',
  'geography': 'Geography & History'
};
```

---

## 🔧 数据库操作建议

### 索引建议
```sql
-- 主要查询索引
CREATE INDEX idx_category ON games(category);
CREATE INDEX idx_difficulty ON games(difficulty);
CREATE INDEX idx_featured ON games(featured);
CREATE INDEX idx_trending ON games(trending);

-- 复合索引
CREATE INDEX idx_category_difficulty ON games(category, difficulty);
```

### 查询示例
```sql
-- 获取数学类简单游戏
SELECT * FROM games 
WHERE category = 'math' AND difficulty = 'Easy'
ORDER BY playCount DESC;

-- 获取特色游戏
SELECT * FROM games 
WHERE featured = true
ORDER BY playCount DESC;
```

---

## 📈 未来扩展考虑

### 可能新增字段
- `lastUpdated` - 游戏最后更新时间
- `gameSize` - 游戏文件大小
- `language` - 游戏语言
- `multiplayer` - 是否支持多人游戏
- `offline` - 是否支持离线游戏

### 数据结构优化
- 考虑将 `tags` 独立为关联表
- 考虑将开发者信息独立为开发者表
- 考虑添加游戏评论和评分系统

---

## 📝 维护说明

### 数据更新频率
- **游戏基本信息** - 很少变更
- **状态字段** - 定期更新（playCount, trending等）
- **图片资源** - 按需更新

### 数据质量保证
1. 定期检查图片链接有效性
2. 验证iframe地址可访问性
3. 更新过时的游戏信息
4. 清理无效或重复数据

---

## 🎯 总结

这个数据库设计：
- ✅ 满足所有前端显示需求
- ✅ 便于爬虫自动化数据采集
- ✅ 结构简洁，避免冗余字段
- ✅ 支持未来功能扩展
- ✅ 符合教育游戏平台的特点

通过这个设计，可以高效地管理游戏数据，支持平台的各种功能需求。 